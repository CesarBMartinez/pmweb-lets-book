function addCss(){"undefined"!=typeof style&&$("body").append(style)}function addModalHtml(){"undefined"!=typeof modalHtml&&$("body").append(modalHtml)}function logoPmw(){var a="https://i.imgur.com/KYSi55p.png";$("#navContent a img").attr("src",a),$(".footerFirstLine .selo-lb").html("").append('<a href="/D/"><img src="'+a+'"></a>');var o=$(".footerFirstLine p").first().text().replace("Let's Book","Booking Engine");$(".footerFirstLine p").first().text(o)}function hoteisDisponiveis(){var a=$("#listagemHoteisContent").children().length;1===a?$("a.caminho-pagina-passado").text("1 disponível."):1<a&&$("a.caminho-pagina-passado").text(a+" disponíveis."),$(".listDivider.caminho-pagina-passado").remove()}function calculaNoites(){var a="#var-periodo-label-noites-2",o=$("#var-periodo-label-noites").text();(o="s"===o.charAt(o.length-1)?o.replace("diárias","noites"):o.replace("diária","noite"))?($(a).text("("+o+")"),$(a).css("display","inline")):$(a).hide()}function fieldPeriodo(){var a=$("#var-partida-pariodo-label").clone(),o="#var-periodo-label-noites",e=$(o).clone();$(".chegada-field .busca-field-label").text("Período"),$("#var-chegada-periodo-label").after(a),$(".chegada-field").append(e),$("#var-partida-pariodo-label").after("<span id='var-periodo-label-noites-2'></span>"),calculaNoites(),$(o).bind("DOMNodeInserted DOMNodeRemoved",function(){calculaNoites()}),$(".saida-field").remove()}function alteraCalendario(){loadCalendarUm=function(a){a.getMonth()==(new Date).getMonth()&&a.getFullYear()==(new Date).getFullYear()?$(".arrow-left").css("pointer-events","none").css("opacity","0.2"):$(".arrow-left").css("pointer-events","").css("opacity","1");var o=a.getMonth()+1,e=a.getFullYear();$("#calendario-1").html(htmlCalendario(o,e)),bindCalendarEvents(),fillBestRates(),calendarioExiste=!0},$("#calendario-2").remove(),limparCalendario=function(){$(".celulaData").removeClass("startDate"),$(".celulaData").removeClass("endDate"),$(".celulaData").removeClass("inBetweenDate"),$(".celulaData").removeClass("voidDate")}}function validaIdadeCriancas(){var o=$("#criancas-quantidade-var"),e=$("#var-busca-criancas").val();e||o.html(""),$(".criancas-editar-label").click(function(){return $("#criancas-quantidade-var").html(""),!0}),novaBusca=function(){var a=!0;if(o=$("#criancas-quantidade-var").html(),(e=$("#var-busca-criancas").val())&&o&&(a=(e=e.split(",")).length==o),o&&!e||!a)return $(".seletor-idade").addClass("invalid-idade"),!1;a&&($(".seletor-idade").removeClass("invalid-idade"),$("#var-busca-tarifa").val(""),$("#form-nova-busca").submit())}}function getHotelId(a){var o=$(a).find(".itemVarNomeHotel").attr("onclick"),e=null;return o&&(e=o.match(/\d+/)[0]),e}function alteraHoteis(){$(".itemVarValorAuxiliar").insertBefore(".itemVarValorFinal"),$("#listagemHoteisContent").children().each(function(){var a=getHotelId(this);if(a){$(this).find(".itemHotelContent").append('<span class="verPromocoesHotel" data-hotel-id="'+a+'">Ver promoções do hotel</span>'),$(this).find(".itemVarNomeHotel").after('<img src="https://i.imgur.com/O2GrxRa.png" class="imgTripadvisor">'),$(this).find(".itemVarValorSemDesconto").length&&($(this).find(".itemBtnEfetuarReserva").css("margin-top","-17px"),$(this).find(".itemVarValorAuxiliar").css("display","none"))}else $(this).find(".icoEnderecoHotel").css("display","none")}),$(".verPromocoesHotel").click(function(){getHotelPromocoes($(this).attr("data-hotel-id"))})}function formataPromocoes(a){$(".modal-promocoes-lista").html("");for(var o=0;o<a.length;o++){for(var e=a[o],i='<div class="promo-lista-descricoes">',t=0;t<e.DescricaoTarifa.length;t++)i+="<span>- "+e.DescricaoTarifa[t]+"</span>";i+="</div>";var n='<div class="promo-valores">';e.ValorTarifaSemDesconto?(n+="<del>"+e.TipoMoeda+" "+e.ValorTarifaSemDesconto+"</del>",n+='<span class="promo-valor promo-com-desconto">'+e.TipoMoeda+" "+e.ValorTarifa+"</span>"):n+='<span class="promo-valor">'+e.TipoMoeda+" "+e.ValorTarifa+"</span>",n+="</div>";var l="<li><strong>"+e.NomeTarifa+'</strong><span class="promo-btn-tooltip">?</span><div class="promo-tooltip">'+e.RegrasTarifa+"</div>"+i+n+'<a href="'+e.LinkPublico+'" class="promo-btn-reservar mcolor-action-btn">Reservar</a></li>';$(".modal-promocoes-lista").append(l)}}function toggleModal(){$(".modal-promocoes").fadeToggle(400)}function modalClosevents(){$(".modal-promocoes-dialog").click(function(a){$(a.target).closest(".modal-promocoes-content").length||(toggleModal(),$(".modal-promocoes-lista").html(""))})}function getHotelPromocoes(a){var o="https://www.pmweb.com.br/cro/promocoes/"+a+".json";$.get(o,function(a){formataPromocoes(a),toggleModal()})}console.info("Adicionando CSS..."),addCss(),console.info("Alterando Logo da Pmweb..."),logoPmw(),console.info("Quantidade de hóteis disoníveis..."),hoteisDisponiveis(),console.info("Juntando fields chegada/partida..."),fieldPeriodo(),console.info("Ajustando calendário..."),alteraCalendario(),console.info("Adicionando validação da idade das crianças..."),validaIdadeCriancas(),console.info("Ajustando listagem de hoteis..."),alteraHoteis(),console.info("Adicionando HTML da Modal de Promoções..."),addModalHtml(),modalClosevents(),console.info("Done! Let's Book!");